From: Hiroaki Nakamura <hnakamur@gmail.com>
Date: Sat, 27 Jan 2018 06:06:03 +0900
Subject: Use go test -args to pass an argument to
 TestUnshareMountNameSpaceHelper

---
 src/syscall/exec_linux_test.go | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

diff --git a/src/syscall/exec_linux_test.go b/src/syscall/exec_linux_test.go
index 17df8f4..7cc55bd 100644
--- a/src/syscall/exec_linux_test.go
+++ b/src/syscall/exec_linux_test.go
@@ -333,7 +333,7 @@ func TestUnshareMountNameSpace(t *testing.T) {
 		t.Fatalf("tempdir: %v", err)
 	}
 
-	cmd := exec.Command(os.Args[0], "-test.run=TestUnshareMountNameSpaceHelper", d)
+	cmd := exec.Command(os.Args[0], "-test.run=TestUnshareMountNameSpaceHelper", "-args", d)
 	cmd.Env = []string{"GO_WANT_HELPER_PROCESS=1"}
 	cmd.SysProcAttr = &syscall.SysProcAttr{Unshareflags: syscall.CLONE_NEWNS}
 
@@ -392,7 +392,7 @@ func TestUnshareMountNameSpaceChroot(t *testing.T) {
 		t.Fatalf("Build of syscall in chroot failed, output %v, err %v", o, err)
 	}
 
-	cmd = exec.Command("/syscall.test", "-test.run=TestUnshareMountNameSpaceHelper", "/")
+	cmd = exec.Command("/syscall.test", "-test.run=TestUnshareMountNameSpaceHelper", "-args", "/")
 	cmd.Env = []string{"GO_WANT_HELPER_PROCESS=1"}
 	cmd.SysProcAttr = &syscall.SysProcAttr{Chroot: d, Unshareflags: syscall.CLONE_NEWNS}
 
